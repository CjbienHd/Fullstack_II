<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Pastelería 1000 Sabores</title>
  <link rel="stylesheet" href="css/styles.css">

 
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Pacifico&display=swap" rel="stylesheet">


  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

</head>
<body>
  <nav class="navbar">
        <img src="../assets/img/icono_PMS-removebg-preview.png" width="80px" alt="Logo"/>
        <h1 class ="Pasteleria">Pastelería Mil Sabores</h1>
        <ul class="nav_links">
          <li><a class="nav_link" href="../Index.html">Home</a> |</li>
        </ul>
    </nav>
  <div class="contenedor-login">
    <div class="logo">
    </div>

    <h1 class="titulo">Iniciar Sesión</h1>

    <div class="caja">
      <form id="login-form">
        <label for="email">Correo electrónico</label>
        <input type="email" id="email" placeholder="Ingrese su correo electrónico" required>

        <label for="password">Contraseña</label>
        <div class="input-pass">
          <input type="password" id="password" placeholder="Ingrese su contraseña" minlength="8" maxlength="20" required>
       
          <i id="togglePass" class="fa-solid fa-eye-slash"></i>
        </div>

        <button type="submit" class="btn">Ingresar</button>
      </form>

      <p class="ayuda">¿No tienes una cuenta? <a href="../registro/index.html">Regístrate</a></p>
    </div>
  </div>


  <script>
    const LS_KEY = 'pms_users';

    function getUsers(){
      try { return JSON.parse(localStorage.getItem(LS_KEY)) || []; }
      catch { return []; }
    }

    const formLogin = document.getElementById('login-form');
    formLogin?.addEventListener('submit', (e)=>{
      e.preventDefault();
      const email = (document.getElementById('email').value || '').trim().toLowerCase();
      const pass  = document.getElementById('password').value;

      if(!email || !pass){ alert('Completa correo y contraseña.'); return; }

      const user = getUsers().find(u => u.email === email);
      if(!user){ alert('Ese correo no está registrado.'); return; }
      if(user.pass !== pass){ alert('Contraseña incorrecta.'); return; }

      localStorage.setItem('pms_logged_user', JSON.stringify({ email: user.email, nombre: user.nombre }));
      window.location.href = "../Index.html";
    });
  </script>


  <script>
    const toggle = document.getElementById('togglePass');
    const passwordInput = document.getElementById('password');

    toggle.addEventListener('click', () => {
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggle.classList.remove("fa-eye-slash");
        toggle.classList.add("fa-eye");  
      } else {
        passwordInput.type = 'password';
        toggle.classList.remove("fa-eye");
        toggle.classList.add("fa-eye-slash"); 
      }
    });
  </script>
</body>
</html>
