<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Pastelería 1000 Sabores</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Pacifico&display=swap" rel="stylesheet">


<body>
  <div class="contenedor-login">
    
    <div class="logo">
      <img src="../assets/img/icono_PMS-removebg-preview.png" alt="Logo Pastelería">
    </div>

    <h1 class="titulo">Iniciar Sesión</h1>

    <div class="caja">
      <form id="login-form">
        <label for="email">Correo electrónico</label>
        <input type="email" id="email" required>

        <label for="password">Contraseña</label>
        <input type="password" id="password" required minlength="4" maxlength="10">

        <button type="submit" class="btn">Ingresar</button>
      </form>


      <p class="ayuda">¿No tienes una cuenta? <a href="../registro/index.html">Regístrate</a></p>
    </div>
    <script>
  const LS_KEY = 'pms_users';

  function getUsers(){
    try { return JSON.parse(localStorage.getItem(LS_KEY)) || []; }
    catch { return []; }
  }

  const formLogin = document.getElementById('login-form');
  formLogin?.addEventListener('submit', (e)=>{
    e.preventDefault();
    const email = (document.getElementById('email').value || '').trim().toLowerCase();
    const pass  = document.getElementById('password').value;

    if(!email || !pass){ alert('Completa correo y contraseña.'); return; }

    const user = getUsers().find(u => u.email === email);
    if(!user){ alert('Ese correo no está registrado.'); return; }
    if(user.pass !== pass){ alert('Contraseña incorrecta.'); return; }

    localStorage.setItem('pms_logged_user', JSON.stringify({ email: user.email, nombre: user.nombre }));

    window.location.href = "../Index.html";
  });
</script>


  </div>
</body>
</html>

